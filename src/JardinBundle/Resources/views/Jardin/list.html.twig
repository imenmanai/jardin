
{% extends'baseAdmin.html.twig' %}
{% block body %}
<script src="{{ asset('js2/jquery.min.js') }}"></script>
    <div data-widget-group="group1">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2>Liste des personnels</h2>
                        <div class="panel-ctrls"></div>
                    </div>
                    <div class="panel-body no-padding">
                        <table id="tableac" class="table table-striped table-bordered" cellspacing="0" width="100%">
                            <thead>
                            <tr>
                                <th>Id</th>
                                <th>Nom</th>
                                <th>Prenom</th>
                                <th>Age</th>
                                <th>Nombre d'heures de travail</th>
                                <th>Prix de l'heure</th>
                                <th>Photo</th>
                                <th>Categorie</th>
                                <th>Salaire</th>
                            </tr>
                            </thead>
                            <tbody>
<h2>Chercher Personnel!</h2>
<input type="text" id="search" placeholder="Search  ...">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
{% set val = 0 %}
{% for info in pagination %}
    {% set val = 0 %}
    <tr>
      <td>{{ info.id}}</td>
      <td>{{ info.nom}}</td>
      <td>{{ info.prenom}}</td>
      <td>{{ info.age}}</td>
      <td>{{ info.nbH}}</td>
      <td>{{ info.prixH}}</td>
      <td><img src="{{ asset('images/' ~ info.image) }} " style="width: 50px;"></td>
      <td>{{ info.categorie.type}}</td>
        {% for s in score %}
            {% if s.personnel == info %}
                {% if s.score < 499 %}
                    {% set val = 0 %}
                {% elseif s.score > 499 and s.score < 999  %}
                    {% set val = 0.05 %}
                {% elseif s.score > 999 and s.score < 1499 %}
                    {% set val = 0.10 %}
                {% elseif s.score > 1499 and s.score < 1999 %}
                    {% set val = 0.15 %}
                {% elseif s.score > 1999 and s.score < 2499 %}
                    {% set val = 0.20 %}
                {% else %}
                    {% set val = 0.25 %}
                {% endif %}
            {% endif %}
        {% endfor %}
        <td>{{ info.prixh * info.nbH + (val*info.prixh*info.nbH)}}</td>
        <td><a TYPE="submit"  href="{{path('jardin_supprime',{'id':info.id})}}" onclick="return confirm('etes vous sure de supprission de ce personnel?')"><button>Supprimer</button></a></td>
        <td><a TYPE="submit"  href="{{path('jardin_modifie',{'id':info.id})}} " onclick="return confirm('etes vous sure de modifier ce personnel?')" ><button>modifier</button></a></td>
        <td><a TYPE="submit"  href="{{path('score',{'id':info.id})}} " onclick="return confirm('etes vous sure de modifier ce score?')" ><button>Score</button></a></td>
    </tr>
{% endfor %}
</tbody>
</table>
</div>
<div class="panel-footer">
<div class="row"><div class="col-sm-6">
</div>
</div>
</div>
<center><div class="DataTables_paginate paging_bootstrap">
    {{ knp_pagination_render(pagination) }}
</div></center>

    <script>
        $(document).ready(function(){
        $('#search').keyup(function(){
        search_table($(this).val());});
    function search_table(value){
        $('#tableac tbody tr').each(function(){
        var found = 'false';
        $(this).each(function(){
            if($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0)
        {
            found = 'true';
        }});
        if(found == 'true')
        {
            $(this).show();
        }
        else
        {$(this).hide();}}); }});
    </script>

{% endblock %}